---
import BaseLayout from '../layouts/BaseLayout.astro';
import Navigation from '../components/Navigation.astro';

const faqs = [
  {
    question: 'How do I add a new bank account?',
    answer: 'Navigate to the Accounts section in your dashboard and click "Add Account". You can manually enter your account details or import transactions from your bank statement.'
  },
  {
    question: 'Can I import bank statements?',
    answer: 'Yes! Centrify Finance supports importing bank statements in CSV, OFX, and QIF formats. Go to Settings > Import and upload your statement file. Our AI will automatically categorize your transactions.'
  },
  {
    question: 'How is my financial data secured?',
    answer: 'We take security seriously. All data is encrypted in transit using TLS 1.3 and at rest using AES-256 encryption. We use Supabase for our database infrastructure, which is SOC 2 Type II compliant. We never share your data with third parties.'
  },
  {
    question: 'Can I manage multiple entities or businesses?',
    answer: 'Absolutely! Centrify Finance is designed for multi-entity management. You can create separate entities for different businesses or personal accounts, each with their own chart of accounts and reporting.'
  },
  {
    question: 'How do I export my data?',
    answer: 'You can export your transactions, reports, and account data at any time from Settings > Export. We support CSV, PDF, and Excel formats. Your data is always yours.'
  },
  {
    question: 'What happens if I cancel my subscription?',
    answer: 'If you cancel, you will retain access until the end of your billing period. After that, your account will be downgraded to a free tier with limited features. Your data is retained for 90 days, giving you time to export or reactivate.'
  },
  {
    question: 'Do you offer a mobile app?',
    answer: 'Yes! Our mobile app is available for both iOS and Android. You can track expenses, view reports, and manage your accounts on the go. Download it from the App Store or Google Play.'
  },
  {
    question: 'How do scheduled payments work?',
    answer: 'Scheduled payments let you track recurring bills and income. Set up a payment with its frequency, and Centrify will remind you before due dates and help you plan your cash flow accordingly.'
  }
];
---

<BaseLayout
  title="Support - Centrify"
  description="Get help with Centrify Finance. Find answers to frequently asked questions or contact our support team."
>
  <Fragment slot="head">
    <style>
      .support-page {
        padding-top: 120px;
        padding-bottom: 80px;
        min-height: 100vh;
      }

      .support-container {
        max-width: 800px;
        margin: 0 auto;
      }

      .support-header {
        text-align: center;
        margin-bottom: 64px;
      }

      .support-header h1 {
        font-size: 48px;
        font-weight: 700;
        margin-bottom: 16px;
        letter-spacing: -0.02em;
      }

      .support-header p {
        font-size: 18px;
        color: var(--text-muted);
        max-width: 500px;
        margin: 0 auto;
      }

      /* Contact Section */
      .contact-section {
        margin-bottom: 80px;
      }

      .contact-card {
        display: flex;
        align-items: center;
        gap: 24px;
        padding: 32px;
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid var(--border);
        border-radius: 20px;
        transition: all 0.3s;
      }

      .contact-card:hover {
        background: rgba(14, 165, 233, 0.1);
        border-color: var(--primary);
      }

      .contact-icon {
        width: 64px;
        height: 64px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: linear-gradient(135deg, var(--primary) 0%, var(--teal) 100%);
        border-radius: 16px;
        flex-shrink: 0;
      }

      .contact-icon svg {
        width: 32px;
        height: 32px;
        stroke: white;
      }

      .contact-info h2 {
        font-size: 22px;
        font-weight: 600;
        margin-bottom: 8px;
      }

      .contact-info p {
        font-size: 15px;
        color: var(--text-muted);
        margin-bottom: 12px;
      }

      .contact-email {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        font-size: 16px;
        font-weight: 600;
        color: var(--primary);
        text-decoration: none;
        transition: color 0.2s;
      }

      .contact-email:hover {
        color: var(--accent);
      }

      .contact-email svg {
        width: 18px;
        height: 18px;
        stroke: currentColor;
      }

      /* FAQ Section */
      .faq-section {
        margin-bottom: 80px;
      }

      .faq-header {
        text-align: center;
        margin-bottom: 40px;
      }

      .faq-header h2 {
        font-size: 32px;
        font-weight: 700;
        margin-bottom: 12px;
      }

      .faq-header p {
        font-size: 16px;
        color: var(--text-muted);
      }

      .faq-list {
        display: flex;
        flex-direction: column;
        gap: 16px;
      }

      .faq-item {
        background: rgba(255, 255, 255, 0.03);
        border: 1px solid var(--border);
        border-radius: 16px;
        overflow: hidden;
        transition: all 0.3s;
      }

      .faq-item:hover {
        border-color: rgba(255, 255, 255, 0.2);
      }

      .faq-question {
        display: flex;
        align-items: center;
        justify-content: space-between;
        width: 100%;
        padding: 24px;
        background: none;
        border: none;
        cursor: pointer;
        text-align: left;
        font-family: inherit;
        color: var(--text);
        font-size: 17px;
        font-weight: 600;
        transition: color 0.2s;
      }

      .faq-question:hover {
        color: var(--primary);
      }

      .faq-question svg {
        width: 20px;
        height: 20px;
        stroke: var(--text-muted);
        transition: transform 0.3s;
        flex-shrink: 0;
        margin-left: 16px;
      }

      .faq-item.active .faq-question svg {
        transform: rotate(180deg);
      }

      .faq-answer {
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.3s ease-out;
      }

      .faq-item.active .faq-answer {
        max-height: 500px;
      }

      .faq-answer-inner {
        padding: 0 24px 24px;
        font-size: 15px;
        color: var(--text-muted);
        line-height: 1.7;
      }

      /* Links Section */
      .links-section {
        text-align: center;
      }

      .links-card {
        padding: 40px;
        background: rgba(255, 255, 255, 0.03);
        border: 1px solid var(--border);
        border-radius: 20px;
      }

      .links-card h3 {
        font-size: 20px;
        font-weight: 600;
        margin-bottom: 16px;
      }

      .links-card p {
        font-size: 15px;
        color: var(--text-muted);
        margin-bottom: 24px;
      }

      .policy-link {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 14px 28px;
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 12px;
        color: var(--text);
        text-decoration: none;
        font-size: 15px;
        font-weight: 600;
        transition: all 0.3s;
      }

      .policy-link:hover {
        background: rgba(14, 165, 233, 0.1);
        border-color: var(--primary);
        color: var(--primary);
      }

      .policy-link svg {
        width: 18px;
        height: 18px;
        stroke: currentColor;
      }

      @media (max-width: 640px) {
        .support-header h1 {
          font-size: 32px;
        }

        .contact-card {
          flex-direction: column;
          text-align: center;
        }

        .faq-question {
          font-size: 15px;
          padding: 20px;
        }

        .faq-answer-inner {
          padding: 0 20px 20px;
        }
      }
    </style>
  </Fragment>

  <Navigation slot="header" />

  <section class="support-page">
    <div class="container">
      <div class="support-container">
        <header class="support-header">
          <h1>How can we help?</h1>
          <p>Find answers to common questions or get in touch with our support team.</p>
        </header>

        <!-- Contact Section -->
        <div class="contact-section">
          <div class="contact-card">
            <div class="contact-icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                <polyline points="22,6 12,13 2,6"/>
              </svg>
            </div>
            <div class="contact-info">
              <h2>Contact Support</h2>
              <p>Our team typically responds within 24 hours on business days.</p>
              <a href="mailto:support@centrify.io" class="contact-email">
                support@centrify.io
                <svg viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M5 12h14M12 5l7 7-7 7"/>
                </svg>
              </a>
            </div>
          </div>
        </div>

        <!-- FAQ Section -->
        <div class="faq-section">
          <div class="faq-header">
            <h2>Frequently Asked Questions</h2>
            <p>Quick answers to common questions about Centrify Finance</p>
          </div>

          <div class="faq-list">
            {faqs.map((faq, index) => (
              <div class="faq-item" data-index={index}>
                <button class="faq-question" aria-expanded="false">
                  {faq.question}
                  <svg viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M6 9l6 6 6-6"/>
                  </svg>
                </button>
                <div class="faq-answer">
                  <div class="faq-answer-inner">
                    {faq.answer}
                  </div>
                </div>
              </div>
            ))}
          </div>
        </div>

        <!-- Privacy Policy Link -->
        <div class="links-section">
          <div class="links-card">
            <h3>Privacy & Legal</h3>
            <p>Learn how we protect your data and what information we collect.</p>
            <a href="https://www.centrify.io/privacy/finance" class="policy-link">
              <svg viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
              </svg>
              View Privacy Policy
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>
</BaseLayout>

<script>
  // FAQ Accordion functionality
  const faqItems = document.querySelectorAll('.faq-item');

  faqItems.forEach(item => {
    const button = item.querySelector('.faq-question');

    button?.addEventListener('click', () => {
      const isActive = item.classList.contains('active');

      // Close all other items
      faqItems.forEach(otherItem => {
        if (otherItem !== item) {
          otherItem.classList.remove('active');
          otherItem.querySelector('.faq-question')?.setAttribute('aria-expanded', 'false');
        }
      });

      // Toggle current item
      item.classList.toggle('active');
      button.setAttribute('aria-expanded', (!isActive).toString());
    });
  });
</script>
